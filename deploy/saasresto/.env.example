# =============================================================================
# SAASRESTO Production Environment Variables
# /opt/saasresto/.env.example
# =============================================================================
# COPY this file to .env and fill in the values.
# NEVER commit .env to git!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
NODE_ENV=production

# Base domain for multi-tenant routing (without protocol)
APP_BASE_DOMAIN=saasresto.isprojets.cloud

# Full base URL (used for absolute URLs, emails, etc.)
APP_BASE_URL=https://saasresto.isprojets.cloud

# -----------------------------------------------------------------------------
# Security - Cookies
# -----------------------------------------------------------------------------
# Enable secure cookies (HTTPS only) - MUST be true in production
COOKIE_SECURE=true

# Cookie domain - use leading dot for wildcard subdomain sharing
# This allows session cookies to work across all tenant subdomains
COOKIE_DOMAIN=.saasresto.isprojets.cloud

# Session cookie name
SESSION_COOKIE_NAME=saasresto_session

# -----------------------------------------------------------------------------
# Security - Authentication
# -----------------------------------------------------------------------------
# Secret key for signing tokens (generate with: openssl rand -base64 32)
AUTH_SECRET=CHANGE_ME_GENERATE_STRONG_SECRET

# Session expiry in days
SESSION_EXPIRY_DAYS=7

# Password hashing rounds (bcrypt)
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# In docker-compose, this is overridden to use internal network
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
POSTGRES_DB=saasresto
POSTGRES_USER=saasresto
POSTGRES_PASSWORD=CHANGE_ME_STRONG_DB_PASSWORD

# This is for local dev; docker-compose overrides it
DATABASE_URL=postgresql://saasresto:CHANGE_ME@saasresto-postgres:5432/saasresto?schema=public

# -----------------------------------------------------------------------------
# File Uploads
# -----------------------------------------------------------------------------
# Directory for user uploads (inside container)
UPLOAD_DIR=/app/uploads

# Maximum upload size in bytes (10MB)
MAX_UPLOAD_SIZE=10485760

# Allowed image types
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp,image/gif

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# API rate limit (requests per window)
RATE_LIMIT_MAX=100

# Rate limit window in milliseconds (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Login rate limit (attempts per window)
LOGIN_RATE_LIMIT_MAX=5

# Login rate limit window in milliseconds (15 minutes)
LOGIN_RATE_LIMIT_WINDOW_MS=900000

# -----------------------------------------------------------------------------
# Docker Image (for docker-compose)
# -----------------------------------------------------------------------------
# GHCR image path - update with your org/repo
SAASRESTO_IMAGE=ghcr.io/your-org/saasresto:latest

# -----------------------------------------------------------------------------
# TLS / Certificates (used by scripts)
# -----------------------------------------------------------------------------
# Hostinger API token for DNS-01 challenge
# Get from: Hostinger Dashboard > API Keys
HOSTINGER_API_TOKEN=CHANGE_ME_HOSTINGER_API_TOKEN

# Certificate email for Let's Encrypt notifications
CERT_EMAIL=admin@isprojets.cloud

# -----------------------------------------------------------------------------
# SMTP (Optional - for password reset, notifications)
# -----------------------------------------------------------------------------
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@isprojets.cloud
# SMTP_PASSWORD=CHANGE_ME
# SMTP_FROM=SAASRESTO <noreply@isprojets.cloud>
# SMTP_SECURE=true

# -----------------------------------------------------------------------------
# Monitoring (Optional)
# -----------------------------------------------------------------------------
# SENTRY_DSN=https://xxx@sentry.io/xxx
# LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
# Number of daily backups to keep
BACKUP_RETENTION_DAYS=14

# Backup directory (host path)
BACKUP_DIR=/opt/saasresto/backups
